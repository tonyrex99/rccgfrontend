<!DOCTYPE html>
<html>
  <head>
    <title>Testimony Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <form id="testimonyForm">
      <input type="text" name="name" placeholder="Your Name" /><br />
      <input type="text" name="body" placeholder="Your Testimony" /><br />
      <input type="submit" value="Submit" />
    </form>

    <script>
      $(document).ready(function () {
        $("#testimonyForm").on("submit", function (e) {
          e.preventDefault();
          const $form = $(this);
          const data = $form.serializeArray();
          const formData = data.reduce((acc, current) => {
            acc[current.name] = current.value;
            return acc;
          }, {});

          const token =
            "bfa4f03f812c5445171ae9829f3c81c71c6a6f3dbaca3eab9920d896f1698a15b2a955da77606128d0b89ee3c4a19bc6c2ddf64e27b66bea1bf58524b20285c9d14d9dda84a05dffb96ad46866ecdc85f85dd0b403be759d41d8a3ebf3022241a44f1c2895e16a3f37ad40e56649c0cdb7b5afb1d8b06382397f7b60173b0c34";

          $.ajax({
            type: "POST",
            url: "https://admin.rccgprovidencecourt.org/requests", // Update URL to your API endpoint
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
            data: JSON.stringify(formData),
            success: function () {
              console.log("success");
              // Clear the form
              $form.trigger("reset");
            },
            error: function () {
              console.log("error");
            },
          });
        });
      });
    </script>
  </body>
</html>
